<!-- Cart Drawer Component - Reusable slide-out shopping cart -->
<div x-show="$store.cart.open"
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition ease-in duration-200"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     @click.self="$store.cart.closeDrawer()"
     class="fixed inset-0 bg-black/50 z-50 flex justify-end">
    
    <!-- Cart Drawer Panel -->
    <div x-show="$store.cart.open"
         @click.stop
         x-transition:enter="transition ease-out duration-300 transform"
         x-transition:enter-start="translate-x-full"
         x-transition:enter-end="translate-x-0"
         x-transition:leave="transition ease-in duration-200 transform"
         x-transition:leave-start="translate-x-0"
         x-transition:leave-end="translate-x-full"
         class="w-full max-w-md bg-white dark:bg-slate-deep shadow-xl h-full overflow-y-auto">
        
        <!-- Cart Header -->
        <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-800">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Shopping Cart</h2>
            <button @click="$store.cart.closeDrawer()" class="p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Close cart">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        
        <!-- Cart Items -->
        <div class="p-6">
            <template x-if="$store.cart.items.length === 0">
                <div class="text-center py-12">
                    <svg class="w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    <p class="text-gray-600 dark:text-gray-400">Your cart is empty</p>
                </div>
            </template>
            
            <div class="space-y-4">
                <template x-for="item in $store.cart.items" :key="item.id">
                    <div class="flex items-start space-x-4 pb-4 border-b border-gray-200 dark:border-gray-800">
                        <div class="w-20 h-20 bg-gray-200 dark:bg-slate-dark rounded-lg flex-shrink-0 flex items-center justify-center">
                            <template x-if="item.variant?.image?.url">
                                <img :src="item.variant.image.url" :alt="item.title" class="w-full h-full object-cover rounded-lg">
                            </template>
                            <template x-if="!item.variant?.image?.url">
                                <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                            </template>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white truncate" x-text="item.title"></h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400" x-text="item.variant?.title || ''"></p>
                            <p class="text-brand-orange font-bold mt-1" x-text="'$' + (item.variant?.price?.amount ? parseFloat(item.variant.price.amount).toFixed(2) : '0.00')"></p>
                            <div class="flex items-center space-x-3 mt-2">
                                <button @click="$store.cart.updateLineItem(item.id, item.quantity - 1)" 
                                        :disabled="item.quantity <= 1"
                                        class="w-8 h-8 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-slate-dark text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                        aria-label="Decrease quantity">
                                    -
                                </button>
                                <span class="text-gray-900 dark:text-white font-medium" x-text="item.quantity"></span>
                                <button @click="$store.cart.updateLineItem(item.id, item.quantity + 1)"
                                        class="w-8 h-8 rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-slate-dark text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                                        aria-label="Increase quantity">
                                    +
                                </button>
                                <button @click="$store.cart.removeLineItem(item.id)" 
                                        class="ml-auto text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm transition-colors">
                                    Remove
                                </button>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>
        
        <!-- Cart Footer -->
        <div class="border-t border-gray-200 dark:border-gray-800 p-6 bg-gray-50 dark:bg-slate-dark sticky bottom-0">
            <div class="flex justify-between items-center mb-4">
                <span class="text-lg font-semibold text-gray-900 dark:text-white">Subtotal:</span>
                <span class="text-xl font-bold text-brand-orange" x-text="'$' + $store.cart.total.toFixed(2)"></span>
            </div>
            <a :href="$store.cart.getCheckoutUrl()" 
               class="block w-full py-4 bg-brand-orange hover:bg-brand-orange/90 text-white font-bold text-lg rounded-lg transition-colors text-center">
                Checkout
            </a>
            <button @click="$store.cart.closeDrawer()" 
                    class="block w-full mt-3 py-3 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">
                Continue Shopping
            </button>
        </div>
    </div>
</div>

